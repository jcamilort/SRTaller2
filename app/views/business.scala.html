@(b:Business)

@main("","Hybrid recommender",null) {

    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true"></script>


    <h1>@b.name</h1>
    <h2>@b.getCity - @b.getState</h2>

    <div id="map_business"></div>

    <script>

    var map, layer;
    var lastMarker;
    function initialize() {
    var mapOptions = {
    zoom: 12,
    center: new google.maps.LatLng(33.4483771,-112.07403729)
    };
    map = new google.maps.Map(document.getElementById('map_business'),mapOptions);

    layer = new google.maps.FusionTablesLayer({
    query: {
    select: '\'Location\'',
    from: '1WtuOzZqOYiiMQ24qapSyzz3AHaYl6hfoh3J7oLKn'
    }
    });
    layer.setMap(map);
    }

    function geodeleg(e){
    placeMarker(e.latLng, map);

    }

    function placeMarker(position, map) {
    if(lastMarker)
    lastMarker.setMap(null);

    var marker = new google.maps.Marker({
    position: position,
    map: map
    });
    map.setCenter(new google.maps.LatLng(position.lat(),position.lng()));


    var textLatitude = document.getElementById("latitude");
    var textLongitude = document.getElementById("longitude");
    textLatitude.value = position.lat();
    textLongitude.value = position.lng();
    map.panTo(position);
    lastMarker=marker;
    }

    google.maps.event.addDomListener(window, 'load', initialize);

    var posB=new google.maps.LatLng(@b.latitude,@b.longitude);
        placeMarker(posB);

    </script>
}
